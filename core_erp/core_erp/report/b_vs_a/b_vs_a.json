{
 "add_total_row": 0,
 "creation": "2022-08-03 12:45:30.501696",
 "disable_prepared_report": 0,
 "disabled": 0,
 "docstatus": 0,
 "doctype": "Report",
 "idx": 0,
 "is_standard": "Yes",
 "javascript": "",
 "letter_head": "DFM Foods Ltd- G.Noida",
 "modified": "2022-08-23 17:32:03.931928",
 "modified_by": "Administrator",
 "module": "Core ERP",
 "name": "B vs A",
 "owner": "Administrator",
 "prepared_report": 0,
 "query": "columns = [ \r\n            {\"label\":\"Company\",\"fieldname\": \"Company\",\"fieldtype\": \"data\",\"width\":120},\r\n            {\"label\":\"Work Order\",\"fieldname\": \"Work Order\",\"fieldtype\": \"data\",\"width\":120},\r\n            {\"label\":\"Bom No\",\"fieldname\": \"Bom No\",\"fieldtype\": \"data\",\"width\":120},\r\n            {\"label\":\"Fg Item\",\"fieldname\": \"Fg Item\",\"fieldtype\": \"data\",\"width\":120},\r\n            {\"label\":\"Fg Name\",\"fieldname\": \"Fg Name\",\"fieldtype\": \"data\",\"width\":120},\r\n            {\"label\":\"Fg Qty\",\"fieldname\": \"Fg Qty\",\"fieldtype\": \"data\",\"width\":120},\r\n            {\"label\":\"Produced Qty\",\"fieldname\": \"Produced Qty\",\"fieldtype\": \"data\",\"width\":120},\r\n            {\"label\":\"Consumed Item\",\"fieldname\": \"Consumed Item\",\"fieldtype\": \"data\",\"width\":120},\r\n            {\"label\":\"Item Name\",\"fieldname\": \"Item Name\",\"fieldtype\": \"data\",\"width\":120},\r\n            {\"label\":\"Stock Entry\",\"fieldname\": \"Stock Entry\",\"fieldtype\": \"data\",\"width\":120},\r\n            {\"label\":\"Gross Qty\",\"fieldname\": \"Gross Qty\",\"fieldtype\": \"data\",\"width\":120},\r\n            {\"label\":\"Consumed Qty\",\"fieldname\": \"Consumed Qty\",\"fieldtype\": \"data\",\"width\":120}\r\n                             \r\n               \r\n            \r\n        ]\r\n\r\n\r\n\r\nres = frappe.db.sql(f\"\"\"select \r\nw.company as Company,\r\nw.parent as \"Work Order\",\r\nw.bom_no as \"Bom No\",\r\nw.fg_item as \"Fg Item\",\r\nw.fg_item_name as \"Fg Name\",\r\nw.fg_qty as \"Fg Qty\",\r\nw.Produced_qty as \"Produced Qty\",\r\nw.item_code as \"Consumed Item\",\r\nw.Item_Name as \"Item Name\",\r\ns.name as \"Stock Entry\",\r\nw.Gross_QTY as \"Gross Qty\",\r\ns.consumed_qty as \"Consumed Qty\"\r\n\r\n\r\n\r\nfrom\r\n\r\n(select \r\nse.name,\r\nse.work_order,\r\nsed.item_code,\r\nsed.item_name,\r\nsed.parent,\r\nsum(sed.qty) as consumed_qty\r\nfrom `tabStock Entry` as se left join `tabStock Entry Detail` as sed \r\non se.name=sed.parent\r\ngroup by sed.item_code,se.work_order,se.name) as s right join \r\n\r\n(select \r\nwo.company as company,\r\nwo.name,\r\nwo.bom_no,\r\nwo.production_item as fg_item,\r\nwo.item_name as fg_item_name,\r\nwo.qty as fg_qty,\r\nwo.produced_qty as Produced_qty,\r\nwoi.parent,\r\nwoi.item_code,\r\nwoi.item_name as \"Item_Name\",\r\nwoi.required_qty as \"Gross_QTY\"\r\nfrom `tabWork Order` as wo left join `tabWork Order Item` as woi\r\non wo.name=woi.parent\r\nwhere wo.status!=\"Not Started\" and wo.docstatus!=0) as w\r\non w.parent=s.work_order and w.item_code=s.item_code\r\n\r\ngroup by s.work_order,s.item_code,s.name\r\norder by s.name\r\n\"\"\",as_dict = 1)\r\n\r\ndata = columns, res",
 "ref_doctype": "Work Order",
 "report_name": "B vs A",
 "report_script": "columns = [ \r\n            {\"label\":\"Company\",\"fieldname\": \"Company\",\"fieldtype\": \"data\",\"width\":120},\r\n            {\"label\":\"Work Order\",\"fieldname\": \"Work Order\",\"fieldtype\": \"data\",\"width\":120},\r\n            {\"label\":\"Bom No\",\"fieldname\": \"Bom No\",\"fieldtype\": \"data\",\"width\":120},\r\n            {\"label\":\"Fg Item\",\"fieldname\": \"Fg Item\",\"fieldtype\": \"data\",\"width\":120},\r\n            {\"label\":\"Fg Name\",\"fieldname\": \"Fg Name\",\"fieldtype\": \"data\",\"width\":120},\r\n            {\"label\":\"Fg Qty\",\"fieldname\": \"Fg Qty\",\"fieldtype\": \"data\",\"width\":120},\r\n            {\"label\":\"Produced Qty\",\"fieldname\": \"Produced Qty\",\"fieldtype\": \"data\",\"width\":120},\r\n            {\"label\":\"Consumed Item\",\"fieldname\": \"Consumed Item\",\"fieldtype\": \"data\",\"width\":120},\r\n            {\"label\":\"Item Name\",\"fieldname\": \"Item Name\",\"fieldtype\": \"data\",\"width\":120},\r\n            {\"label\":\"Stock Entry\",\"fieldname\": \"Stock Entry\",\"fieldtype\": \"data\",\"width\":120},\r\n            {\"label\":\"Gross Qty\",\"fieldname\": \"Gross Qty\",\"fieldtype\": \"data\",\"width\":120},\r\n            {\"label\":\"Consumed Qty\",\"fieldname\": \"Consumed Qty\",\"fieldtype\": \"data\",\"width\":120}\r\n           \r\n            \r\n        ]\r\n\r\ndef condition(filters):\r\n    cond = ''\r\n    if filters.get(\"from_date\"):\r\n        cond = cond + f\"\"\"where l.creation >= \"{filters.get('from_date')}\" \"\"\"\r\n\r\n    if filters.get(\"to_date\"):\r\n        cond = cond + f\"\"\"where l.creation <= \"{filters.get('to_date')}\" \"\"\"\r\n\r\n    return cond\r\n\r\n\r\ncond = condition(filters)\r\n\r\nres = frappe.db.sql(f\"\"\"select \r\nw.company as Company,\r\nw.parent as \"Work Order\",\r\nw.bom_no as \"Bom No\",\r\nw.fg_item as \"Fg Item\",\r\nw.fg_item_name as \"Fg Name\",\r\nw.fg_qty as \"Fg Qty\",\r\nw.Produced_qty as \"Produced Qty\",\r\nw.item_code as \"Consumed Item\",\r\nw.Item_Name as \"Item Name\",\r\ns.name as \"Stock Entry\",\r\nw.Gross_QTY as \"Gross Qty\",\r\ns.consumed_qty as \"Consumed Qty\"\r\n\r\n\r\n\r\nfrom\r\n\r\n(select \r\nse.name,\r\nse.work_order,\r\nsed.item_code,\r\nsed.item_name,\r\nsed.parent,\r\nsum(sed.qty) as consumed_qty\r\nfrom `tabStock Entry` as se left join `tabStock Entry Detail` as sed \r\non se.name=sed.parent\r\ngroup by sed.item_code,se.work_order,se.name) as s right join \r\n\r\n(select \r\nwo.company as company,\r\nwo.name,\r\nwo.bom_no,\r\nwo.production_item as fg_item,\r\nwo.item_name as fg_item_name,\r\nwo.qty as fg_qty,\r\nwo.produced_qty as Produced_qty,\r\nwoi.parent,\r\nwoi.item_code,\r\nwoi.item_name as \"Item_Name\",\r\nwoi.required_qty as \"Gross_QTY\"\r\nfrom `tabWork Order` as wo left join `tabWork Order Item` as woi\r\non wo.name=woi.parent\r\nwhere wo.status!=\"Not Started\" and wo.docstatus!=0) as w\r\non w.parent=s.work_order and w.item_code=s.item_code\r\ngroup by s.work_order,s.item_code,s.name\r\norder by s.name\r\n\"\"\",as_dict = 1)\r\n\r\ndata = columns, res",
 "report_type": "Script Report",
 "roles": [
  {
   "role": "Manufacturing User"
  },
  {
   "role": "Manufacturing Manager"
  }
 ]
}